webpackJsonp([5],{"7pBe":function(e,t){},mFZk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gs4M"),r=a.n(i),s=a("FXHS"),l=a.n(s),o={name:"pageGuided",data:function(){return{rules:{location:[{required:!0,message:"请选择位置",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],imageUrl:[{required:!0,message:"请上传图片",trigger:"blur"}],isUsed:[{required:!0,message:"请选择是否开启",trigger:"change"}],appType:[{required:!0,message:"请选择终端",trigger:"change"}]},total:100,num:6,imgIndex:"",innerVisible:!1,outerVisible:!1,dialogFormVisible:!1,isAdd:!0,loading:!1,appType:[{name:"颂车网APP",val:1},{name:"颂车邦APP",val:2},{name:"出行APP",val:3},{name:"车企源APP",val:4}],formadvert:{title:"",appType:""},tableData:[{appType:"颂车APP",isUsed:1,gmtCreate:"2018-12-12",location:1,title:"标题aaaa"}],imageMultigraph:"123",fileList:[],imageSingle:"",Form:{location:"",title:"",imageUrl:"",appType:"",isUsed:"",currentPage:1,pageSize:this.$config.PAGE_SIZE,createrId:this.$userLogin.getLoginInfo().userNo},detail:"",locationEnum:[{text:"引导页",value:1},{text:"启动页",value:2}]}},methods:{handleCurrentChange:function(e){this.getGuidedAll()},multigraphRemove:function(e,t){this.getImageMultigraph(t)},multigraphBefore:function(e){},getImageMultigraph:function(e){var t=[];e.map(function(e,a){e.response?t.push(e.response.body.url):t.push(e.url)}),this.$data.imageMultigraph=t.join(",")},multigraphSuccess:function(e,t,a){this.getImageMultigraph(a)},singleBefore:function(e){var t="image/jpeg"===e.type||"image/png",a=e.size/1024/1024<5;return t||this.$message.error("上传头像图片格式不正确!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},singleSuccess:function(e,t){this.$data.imageSingle=t.response.body.url},onGuidedAdd:function(){var e=this;return l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$data.dialogFormVisible=!0,e.$data.isAdd=!0,e.$data.Form.id="",e.$nextTick(function(){e.$refs.Form.resetFields(),e.$refs.multigraphUpload.clearFiles(),e.$refs.singleUpload.clearFiles()});case 4:case"end":return t.stop()}},t,e)}))()},resetForm:function(){this.$data.fileList=[],this.$refs.Form.resetFields(),this.$refs.multigraphUpload.clearFiles(),this.$refs.singleUpload.clearFiles(),this.$data.dialogFormVisible=!1},submitData:function(){var e,t=this,a=this.$data.Form.location;this.$data.Form.imageUrl=1==a?this.$data.imageMultigraph:this.$data.imageSingle,this.$refs.Form.validate((e=l()(r.a.mark(function e(a){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,t.$http.post("/guided/guidedLike",t.$data.Form);case 3:(i=e.sent).success&&i.body.length>=1?t.$confirm("该位置已经占用，是否覆盖？").then(l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/guided/guidedUpdateIsUsed",{location:t.$data.Form.location,appType:t.$data.Form.appType,isUsed:2});case 2:e.sent,t.submitForm();case 4:case"end":return e.stop()}},e,t)}))).catch(function(){}):t.submitForm();case 5:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},submitForm:function(){var e=this;return l()(r.a.mark(function t(){var a,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$data.loading=!0,e.$data.isAdd&&(e.$data.Form.id=""),a=e.$data.isAdd?"/guided/GuidedAdd":"/guided/guidedUpdate",t.next=5,e.$http.post(a,e.$data.Form);case 5:(i=t.sent).success&&i.body&&(e.$data.dialogFormVisible=!1,e.$data.fileList=[],e.$refs.Form.resetFields(),e.$refs.multigraphUpload.clearFiles(),e.$refs.singleUpload.clearFiles(),e.$notify.success({title:"提示",message:e.$data.isAdd?"添加成功":"修改成功"}),e.$data.isAdd?e.getGuidedAll():(e.$data.Form.id="",e.$data.formadvert.title="",e.$data.formadvert.appType="",e.getGuidedAll())),e.$data.loading=!1;case 8:case"end":return t.stop()}},t,e)}))()},getGuidedAll:function(){var e=this;return l()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("$data.Form",e.$data.Form),t.next=3,e.$http.post("/guided/guidedList",e.$data.Form);case 3:(a=t.sent).success&&a.body&&(e.$data.total=a.body.count,e.$data.tableData=a.body.rows);case 5:case"end":return t.stop()}},t,e)}))()},guidedDel:function(e){var t=this;this.$confirm("确定删除该数据?").then(l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.post("/guided/guidedDelete",{id:e});case 2:a.sent.success&&(t.getGuidedAll(),t.$message({type:"success",message:"删除成功!"}));case 4:case"end":return a.stop()}},a,t)}))).catch(function(){t.$message({type:"info",message:"已取消删除"})})},guidedFind:function(){var e=this;return l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$data.Form={},e.$data.Form.currentPage=1,e.$data.Form.pageSize=e.$config.PAGE_SIZE,e.$data.Form.title=e.$data.formadvert.title,e.$data.Form.appType=e.$data.formadvert.appType,e.getGuidedAll();case 6:case"end":return t.stop()}},t,e)}))()},handleSee:function(e,t){var a=this;return l()(r.a.mark(function e(){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.$data.detail="",a.$data.outerVisible=!0,e.next=4,a.$http.post("/guided/guidedList",{id:t});case 4:(i=e.sent).success&&(a.$data.detail=i.body,i.body.imageUrl&&(a.$data.detail.imageUrl=i.body.imageUrl.split(",")));case 6:case"end":return e.stop()}},e,a)}))()},handleEdit:function(e,t){var a=this;return l()(r.a.mark(function e(){var i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a,!t){e.next=9;break}return a.$data.isAdd=!1,a.$data.dialogFormVisible=!0,a.$data.fileList=[],e.next=7,a.$http.post("/guided/guidedList",{id:t});case 7:(s=e.sent).success&&([],a.$data.Form=s.body,a.$data.Form.currentPage=1,a.$data.Form.pageSize=a.$config.PAGE_SIZE,1==s.body.location?s.body.imageUrl.split(",").forEach(function(e,t){i.$data.fileList.push({url:e})}):2==s.body.location&&(a.$data.imageSingle=s.body.imageUrl));case 9:case"end":return e.stop()}},e,a)}))()},changeImg:function(e,t){this.$data.innerVisible=!0,this.$data.imgIndex=e}},mounted:function(){this.getGuidedAll()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"page-guided"}},[a("div",{staticClass:"element-breadcrumb"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/guided"}}},[e._v("引导页管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("引导页列表")])],1)],1),e._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formadvert,size:"mini"}},[a("el-form-item",{attrs:{label:"搜索标题"}},[a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:e.formadvert.title,callback:function(t){e.$set(e.formadvert,"title",t)},expression:"formadvert.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择终端"}},[a("el-select",{attrs:{size:"mini",placeholder:""},model:{value:e.formadvert.appType,callback:function(t){e.$set(e.formadvert,"appType",t)},expression:"formadvert.appType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(this.$Tool.getEnumData("AppProcjectEnum"),function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.guidedFind}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini"},on:{click:e.onGuidedAdd}},[e._v("新增")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:this.$Tool.getTableHeight()}},[a("el-table-column",{attrs:{prop:"appType",label:"适用终端",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.appType?a("span",{staticStyle:{"margin-left":"10px"}},[e._v(" 颂车网APP")]):e._e(),e._v(" "),2==t.row.appType?a("span",{staticStyle:{"margin-left":"10px"}},[e._v(" 颂车邦APP")]):e._e(),e._v(" "),3==t.row.appType?a("span",{staticStyle:{"margin-left":"10px"}},[e._v(" 出行APP")]):e._e(),e._v(" "),4==t.row.appType?a("span",{staticStyle:{"margin-left":"10px"}},[e._v(" 车企源APP")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"位置",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v("位置"+e._s(1==t.row.location?"引导页":"启动页"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isUsed",label:"状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(1==t.row.isUsed?"启用":"禁止"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"gmtCreate",label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.gmtCreate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isUsed?a("div",[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){e.handleSee(t,t.row.id)}}},[e._v("查看\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.handleEdit(t,t.row.id)}}},[e._v("编辑\n          ")])],1):e._e(),e._v(" "),2==t.row.isUsed?a("div",[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){e.handleSee(t,t.row.id)}}},[e._v("查看\n            ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.handleEdit(t,t.row.id)}}},[e._v("编辑\n            ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.guidedDel(t.row.id)}}},[e._v("删除\n            ")])],1):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"block "},[a("el-pagination",{staticClass:"right",attrs:{background:"","current-page":e.Form.currentPage,"page-size":e.Form.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.Form,"currentPage",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.isAdd?"引导页添加":"引导页修改",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"Form",staticClass:"demo-ruleForm",attrs:{size:"mini",model:e.Form,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"位置",prop:"location"}},[a("el-select",{attrs:{size:"medium",placeholder:"请选择位置"},model:{value:e.Form.location,callback:function(t){e.$set(e.Form,"location",t)},expression:"Form.location"}},[a("el-option",{key:"1",attrs:{label:"引导页",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"启动页",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入标题"},model:{value:e.Form.title,callback:function(t){e.$set(e.Form,"title",t)},expression:"Form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传图片",prop:"imageUrl"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.Form.location||""==e.Form.location,expression:"Form.location==1||Form.location==''"}]},[a("el-upload",{ref:"multigraphUpload",attrs:{action:this.$config.HTTPOPENAPIURL+"/openapi/common/file/upload",headers:{appId:this.$config.HTTPHEADER_APPID,version:this.$config.HTTPHEADER_APPVERSION,sign:this.$config.HTTPHEADER_APPSIGN},data:{message:"{}"},name:"files","list-type":"picture-card",limit:e.num,"file-list":e.fileList,"on-success":e.multigraphSuccess,"before-upload":e.multigraphBefore,"on-remove":e.multigraphRemove}},[a("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.Form.location,expression:"Form.location==2"}]},[a("el-upload",{ref:"singleUpload",staticClass:"avatar-uploader",attrs:{action:this.$config.HTTPBOSSURL+"/common/upload","show-file-list":!1,"on-success":e.singleSuccess,"before-upload":e.singleBefore}},[e.imageSingle?a("img",{staticClass:"avatar",attrs:{src:e.imageSingle}}):a("i",{staticClass:"el-icon-plus  avatar-uploader-icon"})])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"发布终端",prop:"appType"}},[a("el-select",{attrs:{size:"medium",placeholder:"请选择终端"},model:{value:e.Form.appType,callback:function(t){e.$set(e.Form,"appType",t)},expression:"Form.appType"}},e._l(this.$Tool.getEnumData("AppProcjectEnum"),function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否启用",prop:"isUsed"}},[a("el-radio-group",{model:{value:e.Form.isUsed,callback:function(t){e.$set(e.Form,"isUsed",t)},expression:"Form.isUsed"}},e._l(this.$Tool.getEnumData("IsUsedEnum"),function(t){return a("el-radio",{key:t.value,attrs:{name:"type",label:t.value,value:t.value}},[e._v("\n            "+e._s(t.text)+"\n          ")])}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:e.resetForm}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitData}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看详情",visible:e.outerVisible},on:{"update:visible":function(t){e.outerVisible=t}}},[a("el-form",{ref:"form",attrs:{size:"mini","label-width":"100px"}},[a("el-form-item",{attrs:{label:"位置:"}},[a("span",[e._v(e._s(1==e.detail.location?"引导页":"启动页"))])]),e._v(" "),a("el-form-item",{attrs:{label:"标题:"}},[a("span",[e._v(e._s(e.detail.title))])]),e._v(" "),a("el-form-item",{attrs:{label:"图片展示:"}},[e._l(e.detail.imageUrl,function(t,i){return a("img",{staticClass:"imageUrl",attrs:{src:t},on:{click:function(a){e.changeImg(t,i)}}})}),e._v(" "),a("el-dialog",{attrs:{width:"40%",visible:e.innerVisible,center:"","append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{width:"100%",src:e.imgIndex}})])])],2),e._v(" "),a("el-form-item",{attrs:{label:"发送终端:"}},[1==e.detail.appType?a("span",[e._v("颂车网APP")]):e._e(),e._v(" "),2==e.detail.appType?a("span",[e._v("颂车邦APP")]):e._e(),e._v(" "),3==e.detail.appType?a("span",[e._v("出行APP")]):e._e(),e._v(" "),4==e.detail.appType?a("span",[e._v("车企源APP")]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"是否启用:"}},[a("span",[e._v(e._s(1==e.detail.isUsed?"启用":"禁用"))])])],1)],1)],1)},staticRenderFns:[]};var d=a("jadU")(o,n,!1,function(e){a("7pBe")},"data-v-679304ef",null);t.default=d.exports}});
//# sourceMappingURL=5.e99150f5b1a5f995cbca.js.map